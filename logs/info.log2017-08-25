{"message":"response error to user","stack":"ReferenceError: code is not defined\n    at getAccessTokenFromCache (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:66:77)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:12:24)\n    at Object.getUserInfoByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:98:26)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:49:38\n    at router.post (/Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:53:5)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:112:3)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:174:3)\n    at router (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/middlewares/req_log.js:15:5\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)","level":"error","timestamp":"2017-08-25T10:57:36.165Z"}
{"message":"response error to user","stack":"ReferenceError: code is not defined\n    at getAccessTokenFromCache (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:66:77)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:12:24)\n    at Object.getUserInfoByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:98:26)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:49:38\n    at router.post (/Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:53:5)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:112:3)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:174:3)\n    at router (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/middlewares/req_log.js:15:5\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)","level":"error","timestamp":"2017-08-25T11:26:55.378Z"}
{"message":"response error to user","stack":"ReferenceError: code is not defined\n    at getAccessTokenFromCache (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:66:77)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:12:24)\n    at Object.getUserInfoByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:98:26)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:49:38\n    at router.post (/Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:53:5)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:112:3)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:174:3)\n    at router (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/middlewares/req_log.js:15:5\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)","level":"error","timestamp":"2017-08-25T11:29:17.950Z"}
{"message":"response error to user","stack":"ReferenceError: code is not defined\n    at getAccessTokenFromCache (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:66:77)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:12:24)\n    at Object.getUserInfoByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:98:26)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:50:38\n    at router.post (/Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:54:5)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:112:3)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:174:3)\n    at router (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/middlewares/req_log.js:15:5\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)","level":"error","timestamp":"2017-08-25T11:29:44.918Z"}
{"message":"response error to user","stack":"ReferenceError: code is not defined\n    at getAccessTokenFromCache (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:66:77)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:12:24)\n    at Object.getUserInfoByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:98:26)\n    at router.post (/Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:49:38)\n    at router.post (/Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:53:5)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:112:3)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:174:3)\n    at router (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at module.exports.logRequests.logRequests (/Users/yangran1/Desktop/project/node-class2/express-cnnode/middlewares/req_log.js:15:5)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)","level":"error","timestamp":"2017-08-25T11:30:48.941Z"}
{"message":"response error to user","stack":"ReferenceError: code is not defined\n    at getAccessTokenFromCache (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:66:77)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:12:24)\n    at Object.getUserInfoByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:98:26)\n    at router.post (/Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:49:38)\n    at router.post (/Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:53:5)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:112:3)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:174:3)\n    at router (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at module.exports.logRequests.logRequests (/Users/yangran1/Desktop/project/node-class2/express-cnnode/middlewares/req_log.js:15:5)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)","level":"error","timestamp":"2017-08-25T11:32:02.183Z"}
{"message":"response error to user","stack":"ReferenceError: code is not defined\n    at getAccessTokenFromCache (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:66:77)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:12:24)\n    at Object.getUserInfoByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:98:26)\n    at router.post (/Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:49:38)\n    at router.post (/Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:53:5)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:112:3)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:174:3)\n    at router (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at module.exports.logRequests.logRequests (/Users/yangran1/Desktop/project/node-class2/express-cnnode/middlewares/req_log.js:15:5)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)","level":"error","timestamp":"2017-08-25T11:32:44.105Z"}
{"message":"response error to user","stack":"ReferenceError: code is not defined\n    at getAccessTokenFromCache (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:68:77)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:12:24)\n    at Object.getUserInfoByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:104:26)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:49:38\n    at router.post (/Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:53:5)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:112:3)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:174:3)\n    at router (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/middlewares/req_log.js:15:5\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)","level":"error","timestamp":"2017-08-25T11:44:47.689Z"}
{"message":"response error to user","stack":"ReferenceError: code is not defined\n    at getAccessTokenFromCache (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:68:77)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:12:24)\n    at Object.getUserInfoByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:104:26)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:49:38\n    at router.post (/Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:54:5)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:112:3)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:174:3)\n    at router (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/middlewares/req_log.js:15:5\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)","level":"error","timestamp":"2017-08-25T11:45:22.739Z"}
{"message":"response error to user","stack":"ReferenceError: code is not defined\n    at getAccessTokenFromCache (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:68:77)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:12:24)\n    at Object.getUserInfoByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:104:26)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:49:38\n    at router.post (/Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:54:5)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:112:3)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:174:3)\n    at router (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/middlewares/req_log.js:15:5\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)","level":"error","timestamp":"2017-08-25T11:45:27.985Z"}
{"message":"response error to user","stack":"ReferenceError: code is not defined\n    at getAccessTokenFromCache (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:68:77)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:12:24)\n    at Object.getUserInfoByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:104:26)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:50:38\n    at router.post (/Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:54:5)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:112:3)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:174:3)\n    at router (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/middlewares/req_log.js:15:5\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)","level":"error","timestamp":"2017-08-25T11:45:38.585Z"}
{"message":"response error to user","stack":"ReferenceError: code is not defined\n    at getAccessTokenFromCache (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:68:77)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:12:24)\n    at Object.getUserInfoByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:104:26)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:49:38\n    at router.post (/Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:53:5)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:112:3)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:174:3)\n    at router (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/middlewares/req_log.js:15:5\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)","level":"error","timestamp":"2017-08-25T11:46:00.473Z"}
{"message":"response error to user","stack":"ReferenceError: code is not defined\n    at getAccessTokenFromCache (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:68:77)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:12:24)\n    at Object.getUserInfoByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:104:26)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:49:38\n    at router.post (/Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:53:5)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:112:3)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:174:3)\n    at router (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/middlewares/req_log.js:15:5\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)","level":"error","timestamp":"2017-08-25T11:46:11.270Z"}
{"message":"response error to user","stack":"ReferenceError: code is not defined\n    at getAccessTokenFromCache (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:68:77)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:12:24)\n    at Object.getUserInfoByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:104:26)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:50:38\n    at router.post (/Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:54:5)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:112:3)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:174:3)\n    at router (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/middlewares/req_log.js:15:5\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)","level":"error","timestamp":"2017-08-25T11:48:45.975Z"}
{"message":"response error to user","stack":"ReferenceError: code is not defined\n    at getAccessTokenFromCache (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:68:77)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:12:24)\n    at Object.getUserInfoByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:105:26)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:49:38\n    at router.post (/Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:53:5)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:112:3)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:174:3)\n    at router (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/middlewares/req_log.js:15:5\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)","level":"error","timestamp":"2017-08-25T11:49:25.623Z"}
{"message":"response error to user","stack":"ReferenceError: code is not defined\n    at getAccessTokenFromCache (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:69:77)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:13:24)\n    at Object.getUserInfoByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:106:26)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:49:38\n    at router.post (/Users/yangran1/Desktop/project/node-class2/express-cnnode/routes/index.js:53:5)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/route.js:112:3)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:174:3)\n    at router (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:284:7\n    at Function.process_params (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:335:12)\n    at next (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:275:10)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/middlewares/req_log.js:15:5\n    at Layer.handle [as handle_request] (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/express/lib/router/index.js:317:13)","level":"error","timestamp":"2017-08-25T11:49:54.515Z"}
{"message":"response error to user","stack":"ValidateionError: error validating param, path: access_token, reason: access_token can not be empty\n    at saveUserAccessToken (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:57:50)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:23:9)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","CNCode":200000,"httpCode":400,"httpMsg":"参数错误","name":"ValidateionError","level":"error","timestamp":"2017-08-25T11:50:43.482Z"}
{"message":"response error to user","stack":"ValidateionError: error validating param, path: access_token, reason: access_token can not be empty\n    at saveUserAccessToken (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:56:50)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:22:9)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","CNCode":200000,"httpCode":400,"httpMsg":"参数错误","name":"ValidateionError","level":"error","timestamp":"2017-08-25T11:51:27.816Z"}
{"message":"response error to user","stack":"ValidateionError: error validating param, path: access_token, reason: access_token can not be empty\n    at saveUserAccessToken (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:57:50)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:22:9)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","CNCode":200000,"httpCode":400,"httpMsg":"参数错误","name":"ValidateionError","level":"error","timestamp":"2017-08-25T11:54:12.696Z"}
{"message":"response error to user","stack":"ValidateionError: error validating param, path: access_token, reason: access_token can not be empty\n    at saveUserAccessToken (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:57:50)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:22:9)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","CNCode":200000,"httpCode":400,"httpMsg":"参数错误","name":"ValidateionError","level":"error","timestamp":"2017-08-25T12:07:01.235Z"}
{"message":"response error to user","stack":"ValidateionError: error validating param, path: access_token, reason: access_token can not be empty\n    at saveUserAccessToken (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:57:50)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:22:9)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","CNCode":200000,"httpCode":400,"httpMsg":"参数错误","name":"ValidateionError","level":"error","timestamp":"2017-08-25T12:07:12.688Z"}
{"message":"response error to user","stack":"ValidateionError: error validating param, path: access_token, reason: access_token can not be empty\n    at saveUserAccessToken (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:57:50)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:22:9)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","CNCode":200000,"httpCode":400,"httpMsg":"参数错误","name":"ValidateionError","level":"error","timestamp":"2017-08-25T12:07:14.613Z"}
{"message":"response error to user","stack":"ValidateionError: error validating param, path: access_token, reason: access_token can not be empty\n    at saveUserAccessToken (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:57:50)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:22:9)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","CNCode":200000,"httpCode":400,"httpMsg":"参数错误","name":"ValidateionError","level":"error","timestamp":"2017-08-25T12:08:02.247Z"}
{"message":"response error to user","stack":"ValidateionError: error validating param, path: access_token, reason: access_token can not be empty\n    at saveUserAccessToken (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:57:50)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:22:9)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","CNCode":200000,"httpCode":400,"httpMsg":"参数错误","name":"ValidateionError","level":"error","timestamp":"2017-08-25T12:08:04.223Z"}
{"message":"response error to user","stack":"ValidateionError: error validating param, path: access_token, reason: access_token can not be empty\n    at saveUserAccessToken (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:57:50)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:22:9)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","CNCode":200000,"httpCode":400,"httpMsg":"参数错误","name":"ValidateionError","level":"error","timestamp":"2017-08-25T12:08:05.077Z"}
{"message":"response error to user","stack":"ValidateionError: error validating param, path: access_token, reason: access_token can not be empty\n    at saveUserAccessToken (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:57:50)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:22:9)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","CNCode":200000,"httpCode":400,"httpMsg":"参数错误","name":"ValidateionError","level":"error","timestamp":"2017-08-25T12:08:41.081Z"}
{"message":"response error to user","stack":"ValidateionError: error validating param, path: access_token, reason: access_token can not be empty\n    at saveUserAccessToken (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:57:50)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:22:9)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","CNCode":200000,"httpCode":400,"httpMsg":"参数错误","name":"ValidateionError","level":"error","timestamp":"2017-08-25T12:22:55.573Z"}
{"message":"response error to user","stack":"ValidateionError: error validating param, path: access_token, reason: access_token can not be empty\n    at saveUserAccessToken (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:57:50)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:22:9)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","CNCode":200000,"httpCode":400,"httpMsg":"参数错误","name":"ValidateionError","level":"error","timestamp":"2017-08-25T12:27:44.084Z"}
{"message":"response error to user","stack":"ReferenceError: createdANewUser is not defined\n    at Object.loginWithWechat (/Users/yangran1/Desktop/project/node-class2/express-cnnode/models/mongo/user.js:130:23)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","level":"error","timestamp":"2017-08-25T12:28:00.932Z"}
{"message":"response error to user","stack":"ValidateionError: error validating param, path: access_token, reason: access_token can not be empty\n    at saveUserAccessToken (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:57:50)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:22:9)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","CNCode":200000,"httpCode":400,"httpMsg":"参数错误","name":"ValidateionError","level":"error","timestamp":"2017-08-25T12:28:03.918Z"}
{"message":"response error to user","stack":"ValidateionError: error validating param, path: access_token, reason: access_token can not be empty\n    at saveUserAccessToken (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:57:50)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:22:9)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","CNCode":200000,"httpCode":400,"httpMsg":"参数错误","name":"ValidateionError","level":"error","timestamp":"2017-08-25T12:28:05.661Z"}
{"message":"response error to user","stack":"ReferenceError: createdANewUser is not defined\n    at Object.loginWithWechat (/Users/yangran1/Desktop/project/node-class2/express-cnnode/models/mongo/user.js:130:23)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","level":"error","timestamp":"2017-08-25T12:28:51.300Z"}
{"message":"response error to user","stack":"ValidateionError: error validating param, path: access_token, reason: access_token can not be empty\n    at saveUserAccessToken (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:57:50)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:22:9)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","CNCode":200000,"httpCode":400,"httpMsg":"参数错误","name":"ValidateionError","level":"error","timestamp":"2017-08-25T12:30:48.255Z"}
{"message":"error creating user","errors":{"phoneNumber":{"message":"Path `phoneNumber` is required.","name":"ValidatorError","properties":{"type":"required","message":"Path `{PATH}` is required.","path":"phoneNumber"},"kind":"required","path":"phoneNumber","$isValidatorError":true}},"_message":"user validation failed","stack":"MongooseError: user validation failed\n    at ValidationError (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/error/validation.js:27:11)\n    at model.Document.invalidate (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/document.js:1609:32)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/document.js:1481:17\n    at validate (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/schematype.js:760:7)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/schematype.js:805:11\n    at Array.forEach (native)\n    at SchemaString.SchemaType.doValidate (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/schematype.js:765:19)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/document.js:1479:9\n    at _combinedTickCallback (internal/process/next_tick.js:95:7)\n    at process._tickCallback (internal/process/next_tick.js:161:9)","name":"ValidationError","level":"error","timestamp":"2017-08-25T12:31:08.243Z"}
{"message":"response error to user","stack":"TypeError: Errors.ValidationError is not a constructor\n    at user.save.catch.e (/Users/yangran1/Desktop/project/node-class2/express-cnnode/models/mongo/user.js:64:17)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","level":"error","timestamp":"2017-08-25T12:31:08.247Z"}
{"message":"response error to user","stack":"ValidateionError: error validating param, path: access_token, reason: access_token can not be empty\n    at saveUserAccessToken (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:57:50)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:22:9)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","CNCode":200000,"httpCode":400,"httpMsg":"参数错误","name":"ValidateionError","level":"error","timestamp":"2017-08-25T12:33:19.167Z"}
{"message":"response error to user","stack":"ValidateionError: error validating param, path: access_token, reason: access_token can not be empty\n    at saveUserAccessToken (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:57:50)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:22:9)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","CNCode":200000,"httpCode":400,"httpMsg":"参数错误","name":"ValidateionError","level":"error","timestamp":"2017-08-25T12:33:35.702Z"}
{"message":"response error to user","stack":"ValidateionError: error validating param, path: access_token, reason: access_token can not be empty\n    at saveUserAccessToken (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:57:50)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:22:9)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","CNCode":200000,"httpCode":400,"httpMsg":"参数错误","name":"ValidateionError","level":"error","timestamp":"2017-08-25T12:34:08.041Z"}
{"message":"error creating user","errors":{"phoneNumber":{"message":"Path `phoneNumber` is required.","name":"ValidatorError","properties":{"type":"required","message":"Path `{PATH}` is required.","path":"phoneNumber"},"kind":"required","path":"phoneNumber","$isValidatorError":true}},"_message":"user validation failed","stack":"MongooseError: user validation failed\n    at ValidationError (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/error/validation.js:27:11)\n    at model.Document.invalidate (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/document.js:1609:32)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/document.js:1481:17\n    at validate (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/schematype.js:760:7)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/schematype.js:805:11\n    at Array.forEach (native)\n    at SchemaString.SchemaType.doValidate (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/schematype.js:765:19)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/document.js:1479:9\n    at _combinedTickCallback (internal/process/next_tick.js:95:7)\n    at process._tickCallback (internal/process/next_tick.js:161:9)","name":"ValidationError","level":"error","timestamp":"2017-08-25T12:34:35.957Z"}
{"message":"response error to user","stack":"TypeError: Errors.ValidationError is not a constructor\n    at user.save.catch.e (/Users/yangran1/Desktop/project/node-class2/express-cnnode/models/mongo/user.js:64:17)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","level":"error","timestamp":"2017-08-25T12:34:35.960Z"}
{"message":"response error to user","stack":"ValidateionError: error validating param, path: access_token, reason: access_token can not be empty\n    at saveUserAccessToken (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:57:50)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:22:9)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","CNCode":200000,"httpCode":400,"httpMsg":"参数错误","name":"ValidateionError","level":"error","timestamp":"2017-08-25T12:36:33.547Z"}
{"message":"error creating user","errors":{"phoneNumber":{"message":"Path `phoneNumber` is required.","name":"ValidatorError","properties":{"type":"required","message":"Path `{PATH}` is required.","path":"phoneNumber"},"kind":"required","path":"phoneNumber","$isValidatorError":true}},"_message":"user validation failed","stack":"MongooseError: user validation failed\n    at ValidationError (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/error/validation.js:27:11)\n    at model.Document.invalidate (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/document.js:1609:32)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/document.js:1481:17\n    at validate (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/schematype.js:760:7)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/schematype.js:805:11\n    at Array.forEach (native)\n    at SchemaString.SchemaType.doValidate (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/schematype.js:765:19)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/document.js:1479:9\n    at _combinedTickCallback (internal/process/next_tick.js:95:7)\n    at process._tickCallback (internal/process/next_tick.js:161:9)","name":"ValidationError","level":"error","timestamp":"2017-08-25T12:37:13.608Z"}
{"message":"response error to user","stack":"ValidateionError: error validating param, path: user, reason: error creating user {\"name\":\"豹豹\",\"openId\":\"oSc1AwzpOJfdgqmCHF7lzY4hWmKE\"}. user validation failed: phoneNumber: Path `phoneNumber` is required.\n    at user.save.catch.e (/Users/yangran1/Desktop/project/node-class2/express-cnnode/models/mongo/user.js:64:17)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","CNCode":200000,"httpCode":400,"httpMsg":"参数错误","name":"ValidateionError","level":"error","timestamp":"2017-08-25T12:37:13.613Z"}
{"message":"response error to user","stack":"ValidateionError: error validating param, path: access_token, reason: access_token can not be empty\n    at saveUserAccessToken (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:57:50)\n    at getAccessTokenByCode (/Users/yangran1/Desktop/project/node-class2/express-cnnode/services/wechat_service.js:22:9)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","CNCode":200000,"httpCode":400,"httpMsg":"参数错误","name":"ValidateionError","level":"error","timestamp":"2017-08-25T12:42:36.345Z"}
{"message":"error creating user","errors":{"phoneNumber":{"message":"Path `phoneNumber` is required.","name":"ValidatorError","properties":{"type":"required","message":"Path `{PATH}` is required.","path":"phoneNumber"},"kind":"required","path":"phoneNumber","$isValidatorError":true}},"_message":"user validation failed","stack":"MongooseError: user validation failed\n    at ValidationError (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/error/validation.js:27:11)\n    at model.Document.invalidate (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/document.js:1609:32)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/document.js:1481:17\n    at validate (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/schematype.js:760:7)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/schematype.js:805:11\n    at Array.forEach (native)\n    at SchemaString.SchemaType.doValidate (/Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/schematype.js:765:19)\n    at /Users/yangran1/Desktop/project/node-class2/express-cnnode/node_modules/mongoose/lib/document.js:1479:9\n    at _combinedTickCallback (internal/process/next_tick.js:95:7)\n    at process._tickCallback (internal/process/next_tick.js:161:9)","name":"ValidationError","level":"error","timestamp":"2017-08-25T12:43:00.863Z"}
{"message":"response error to user","stack":"ValidateionError: error validating param, path: user, reason: error creating user {\"name\":\"豹豹\",\"openId\":\"oSc1AwzpOJfdgqmCHF7lzY4hWmKE\"}. user validation failed: phoneNumber: Path `phoneNumber` is required.\n    at user.save.catch.e (/Users/yangran1/Desktop/project/node-class2/express-cnnode/models/mongo/user.js:65:17)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:169:7)","CNCode":200000,"httpCode":400,"httpMsg":"参数错误","name":"ValidateionError","level":"error","timestamp":"2017-08-25T12:43:00.869Z"}
